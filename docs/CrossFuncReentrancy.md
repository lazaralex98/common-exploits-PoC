# Solidity API

## CFRT

### balances

```solidity
mapping(address => uint256) balances
```

### deposit

```solidity
function deposit() public payable
```

Sends ETH and updates in-contract balance of sender.

### transfer

```solidity
function transfer(address to, uint256 amount) public
```

Creates an in-contract transfer by updating the balance of the sender and receiver.
Similar to an ERC20 transfer.

### withdraw

```solidity
function withdraw() public
```

Withdraws all of the ETH the caller has in balance and resets balance to 0.
Is vulnerable to reentrancy which could be fixed by transfering the ETH
after changing the balance.

## CFRA

The attacker is able to withdraw double what they have deposited.
This attack can be leveraged by using a flash loan.

### target

```solidity
contract CFRT target
```

An interface to the target that will allow us to call its functions.

### owner

```solidity
address owner
```

Address of the hacker.

### constructor

```solidity
constructor(address _target) public
```

Set the target on deployment because we need it in storage
to be able to call it from the receive function.

### deposit

```solidity
function deposit() public payable
```

Deposit ETH into the target contract. This increases the attacker's balance.

### attack

```solidity
function attack() public payable
```

Withdraw ETH from the target contract. This will call the receive function
and allows us to take over the control flow.

### receive

```solidity
receive() external payable
```

This is called when the target contract sends ETH to this contract.
This is where we are taking over the control flow to transfer
in-contract ETH to the attacker owner address.

### withdraw

```solidity
function withdraw() public
```

Withdraw all ETH from the attacker contract to owner.

